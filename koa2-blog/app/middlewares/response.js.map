{"version":3,"sources":["../../src/middlewares/response.js"],"names":[],"mappings":"AAAA;;;;;;;AAOA;AACA;0gBACA,IAAI,OAAO,QAAQ,MAAR,CAAX;;AAEA;;;AAGA,IAAM,WAAW,SAAX,QAAW,GAAW;AAC1B,4FAAO,iBAAM,GAAN,EAAW,IAAX;AACL,kBAAI,IAAJ,GAAW,UAAS,GAAT,EAAc,IAAd,EAAoB,GAApB,EAAyB;AAClC,oBAAI,SAAS;AACX,2BAAS,IADE,EAAb;;AAGA,oBAAI,GAAJ,EAAS;AACP,2BAAS,KAAK,OAAL,CAAa,MAAb,EAAqB,EAAE,MAAM,GAAR,EAArB,CAAT;AACD;AACD,oBAAI,SAAS,CAAT,IAAc,GAAlB,EAAuB;AACrB,2BAAS,KAAK,OAAL,CAAa,MAAb,EAAqB;AAC5B,4BAAQ,GADoB,EAArB,CAAT;;AAGD;AACD,oBAAI,IAAJ,GAAW,yBAAe,MAAf,CAAX;AACD,eAbD,CADK;;AAgBC,sBAhBD,iEAAP;;AAkBD,CAnBD,C;;;AAsBE,Q,GAAA,Q","file":"response.js","sourcesContent":["/*\n * @Author: fengyun2\n * @Date:   2016-07-21 11:29:28\n * @Last Modified by:   fengyun2\n * @Last Modified time: 2016-07-21 11:47:07\n */\n\n\"use strict\";\n///<reference path=\"../../typings/globals/node/node.d.ts\" />\nvar util = require('util');\n\n/*\n * 定制报文格式\n */\nconst response = function() {\n  return async(ctx, next) => {\n    ctx.send = function(res, code, msg) {\n      var result = {\n        retCode: code\n      }\n      if (res) {\n        result = util._extend(result, { data: res });\n      }\n      if (code !== 0 && msg) {\n        result = util._extend(result, {\n          retMsg: msg\n        });\n      }\n      ctx.body = JSON.stringify(result);\n    };\n\n    await next()\n  }\n}\n\nexport {\n  response\n}\n"]}