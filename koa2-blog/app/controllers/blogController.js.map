{"version":3,"sources":["../../src/controllers/blogController.js"],"names":[],"mappings":";;AAEA,yD;;AAEA,IAAM,yFAAM,iBAAM,GAAN,EAAW,IAAX;AACF,4BADE,GACK;AACT,mCAAO,IADE;AAET,kCAAM,MAFG;AAGT,mCAAO,WAHE;AAIT,uCAAW,UAJF;AAKT,uCAAW,UALF,EADL;;;AASE,kDAAY,GAAZ,CAAgB,IAAhB,CATF;AAUJ,4BAAI,IAAJ,GAAW;AACP,iCAAK,SADE;AAEP,oCAAQ,CAFD;AAGP,qCAAS,OAHF,EAAX,CAVI;;;AAgBJ,gCAAQ,KAAR;AACA,4BAAI,IAAJ,GAAW;AACP,iCAAK,OADE;AAEP,oCAAQ,YAAI,MAFL;AAGP,qCAAS,YAAI,OAHN,EAAX,CAjBI,8EAAN,yEAAN,C,CAJA;;;;;AA6BA,IAAM,2FAAO,kBAAM,GAAN,EAAW,IAAX;AACL,kCADK,GACQ,EAAE,SAAS,WAAX,EADR;AAEL,8BAFK,GAEI,EAAE,KAAK,CAAP,EAFJ;AAGL,+BAHK,GAGK,EAAE,MAAM,CAAR,EAAW,OAAO,CAAlB,EAHL;AAIT,gCAAQ,GAAR,CAAY,gBAAZ,EAJS;;AAML,gCAAQ,GAAR,qBAA8B,sBAAY,IAAZ,EAA9B,EANK;AAOgB,kDAAY,IAAZ,CAAiB,UAAjB,EAA6B,MAA7B,EAAqC,OAArC,CAPhB,SAOC,MAPD;AAQL,gCAAQ,GAAR;AACA,4BAAI,IAAJ,GAAW;AACH,iCAAK,SADF;AAEH,oCAAQ,CAFL;AAGH,qCAAS,OAHN;AAIH,kCAAM,MAJH,EAAX;;AAMI;;;;;AAKJ,gCAAQ,GAAR,cAAuB,MAAvB,EApBK;;AAsBL,gCAAQ,KAAR;AACA,4BAAI,IAAJ,GAAW;AACP,iCAAK,OADE;AAEP,oCAAQ,aAAI,MAFL;AAGP,qCAAS,aAAI,OAHN,EAAX,CAvBK;;;;AA8BT,gCAAQ,GAAR,CAAY,GAAZ,EA9BS,iFAAP,4EAAN,C;;;;AAkCe;AACX,YADW;AAEX,cAFW,E","file":"blogController.js","sourcesContent":["///<reference path=\"../../typings/index.d.ts\" />\r\n\r\nimport blogService from '../services/blogService.js';\r\n\r\nconst add = async(ctx, next) => {\r\n    const blog = {\r\n        title: '宝宝',\r\n        slug: '宝宝不哭',\r\n        state: 'published',\r\n        createdBy: 'fengyun2',\r\n        updatedBy: 'fengyun2',\r\n    }\r\n    try {\r\n        await blogService.add(blog);\r\n        ctx.body = {\r\n            tag: 'success',\r\n            status: 1,\r\n            message: '添加成功!'\r\n        };\r\n    } catch (err) {\r\n        console.error(`add error: ${err}`);\r\n        ctx.body = {\r\n            tag: 'error',\r\n            status: err.status,\r\n            message: err.message,\r\n        }\r\n    }\r\n}\r\n\r\nconst list = async(ctx, next) => {\r\n    let conditions = { \"state\": \"published\" };\r\n    let fields = { _id: 0 };\r\n    let options = { skip: 0, limit: 2 };\r\n    console.log('before 444 <==')\r\n    try {\r\n        console.log(`try before <== ${blogService.list()}`);\r\n        const result = await blogService.list(conditions, fields, options);\r\n        console.log(`get result <==`);\r\n        ctx.body = {\r\n                tag: 'success',\r\n                status: 1,\r\n                message: '查询成功!',\r\n                data: result,\r\n            }\r\n            /*        result.then(function(value) {\r\n                            console.log('111', value)\r\n                        }, function(value) {\r\n                            console.log('222', value)\r\n                        })*/\r\n        console.log(`result: ${result}`);\r\n    } catch (err) {\r\n        console.error(`list error: ${err}`);\r\n        ctx.body = {\r\n            tag: 'error',\r\n            status: err.status,\r\n            message: err.message,\r\n        }\r\n    }\r\n\r\n    console.log(444)\r\n\r\n}\r\n\r\nexport default {\r\n    add,\r\n    list\r\n}"]}